(function(a){a.fn.modal=function(b){function i(){d.hide();d.html("");d.removeClass();a("#mask").remove()}function h(){var b=a(document).height();var c=a(window).width();a("#mask").css({width:c,height:b});a("#mask").fadeIn(1e3);a("#mask").fadeTo("slow",.6);var e=a(window).height();var f=a(window).width();d.css("top",e/2-d.height()/2);d.css("left",f/2-d.width()/2);d.children(".text").before('<a class="close"></a>');d.addClass("modal");d.fadeIn(2e3)}function g(){d.removeClass();d.addClass("message");d.addClass("modal");a.ajax({type:"POST",url:c.url,success:function(a){d.children(".text").html(a);h()},error:function(a,b,c){d.html('<ul class="errors"><li>Something went wrong with out System, please alert our admin with this id: AJ198473</li></ul>');h()}})}function f(a){d.removeClass();d.addClass("message");d.addClass("modal");h()}function e(){d.removeClass();d.addClass("error");d.addClass("modal");if(c.reportError==true){d.children(".text").after('<a class="reportError button" href="'+c.reportURL+'">Report Error</a>')}h()}var c={style:"message",text:"",url:"",cancel:"",reportError:false,reportURL:""};var b=a.extend(c,b);var d=a(this);d.before('<div id="mask"><div>');if(c.style=="error"){d.html('<p class="text">'+c.text+"</p>");e()}else if(c.style=="message"){d.html('<p class="text">'+c.text+"</p>");f()}else if(c.style=="html"){d.html('<div class="text">'+c.text+"</div>");g()}a(".modal .close").live("click",function(){i();c.cancel.call(this)});a("#mask").live("click",function(){i();c.cancel})}})(jQuery)